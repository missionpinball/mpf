<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mpf.platform.openpixel module &mdash; Mission Pinball Framework 0.20.0-a0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.20.0-a0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Mission Pinball Framework 0.20.0-a0 documentation" href="index.html" />
    <link rel="up" title="mpf.platform package" href="mpf.platform.html" />
    <link rel="next" title="mpf.platform.p3_roc module" href="mpf.platform.p3_roc.html" />
    <link rel="prev" title="mpf.platform.fast module" href="mpf.platform.fast.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mpf.platform.p3_roc.html" title="mpf.platform.p3_roc module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mpf.platform.fast.html" title="mpf.platform.fast module"
             accesskey="P">previous</a> |</li>
        <li><a href="mpf.html">Mission Pinball Framework 0.20.0-a0 documentation</a> &raquo;</li>
          <li><a href="mpf.platform.html" accesskey="U">mpf.platform package</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-mpf.platform.openpixel">
<span id="mpf-platform-openpixel-module"></span><h1>mpf.platform.openpixel module</h1>
<p>Contains code for an Open Pixel Controller hardware for RGB LEDs.</p>
<dl class="class">
<dt id="mpf.platform.openpixel.HardwarePlatform">
<em class="property">class </em><tt class="descclassname">mpf.platform.openpixel.</tt><tt class="descname">HardwarePlatform</tt><big>(</big><em>machine</em><big>)</big></dt>
<dd><p>Bases: <a class="reference internal" href="mpf.system.platform.html#mpf.system.platform.Platform" title="mpf.system.platform.Platform"><tt class="xref py py-class docutils literal"><span class="pre">mpf.system.platform.Platform</span></tt></a></p>
<p>Base class for the open pixel hardware platform.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>machine</strong> &#8211; The main <tt class="docutils literal"><span class="pre">MachineController</span></tt> object.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="mpf.platform.openpixel.HardwarePlatform.configure_led">
<tt class="descname">configure_led</tt><big>(</big><em>config</em><big>)</big></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.platform.openpixel.OPCThread">
<em class="property">class </em><tt class="descclassname">mpf.platform.openpixel.</tt><tt class="descname">OPCThread</tt><big>(</big><em>machine</em>, <em>sending_queue</em>, <em>config</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">threading.Thread</span></tt></p>
<p>Base class for the thread that connects to the OPC server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>machine</strong> &#8211; The main <tt class="docutils literal"><span class="pre">MachineController</span></tt> instance.</li>
<li><strong>queue</strong> &#8211; The Queue() object that receives OPC messages for the OPC server.</li>
<li><strong>config</strong> &#8211; Dictionary of configuration settings.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The OPC connection is handled in a separate thread so it doesn&#8217;t bog down
the main MPF machine loop if there are connection problems.</p>
<dl class="method">
<dt id="mpf.platform.openpixel.OPCThread.connect">
<tt class="descname">connect</tt><big>(</big><big>)</big></dt>
<dd><p>Connects to the OPC server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True on success. False if it was unable to connect.</td>
</tr>
</tbody>
</table>
<p>This method also tracks and respects <tt class="docutils literal"><span class="pre">connection_attempts</span></tt> and
<tt class="docutils literal"><span class="pre">max_connection_attempts</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.openpixel.OPCThread.disconnect">
<tt class="descname">disconnect</tt><big>(</big><big>)</big></dt>
<dd><p>Disconnects from the OPC server.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.openpixel.OPCThread.done">
<tt class="descname">done</tt><big>(</big><big>)</big></dt>
<dd><p>Exits the thread and causes MPF to shut down.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.openpixel.OPCThread.run">
<tt class="descname">run</tt><big>(</big><big>)</big></dt>
<dd><p>Thread run loop.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.platform.openpixel.OpenPixelClient">
<em class="property">class </em><tt class="descclassname">mpf.platform.openpixel.</tt><tt class="descname">OpenPixelClient</tt><big>(</big><em>machine</em>, <em>config</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Base class of an OPC client which connects to a FadeCandy server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>machine</strong> &#8211; The main <tt class="docutils literal"><span class="pre">MachineController</span></tt> instance.</li>
<li><strong>server</strong> &#8211; String name of the server to connect to.</li>
<li><strong>port</strong> &#8211; Int of the TCP port of the server to connect to.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="mpf.platform.openpixel.OpenPixelClient.add_pixel">
<tt class="descname">add_pixel</tt><big>(</big><em>channel</em>, <em>led</em><big>)</big></dt>
<dd><p>Adds a pixel to the list that will be sent to the OPC server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>channel</strong> &#8211; Integer of the OPC channel this pixel is on.</li>
<li><strong>led</strong> &#8211; Integer of the pixel number (i.e. its position in the list) for
this pixel.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This is needed since MPF will process LED device entries in random
order, so if (for example) we get a call to setup LED #20, then we need
we make sure we have 19 items on the list before it.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.openpixel.OpenPixelClient.send">
<tt class="descname">send</tt><big>(</big><em>message</em><big>)</big></dt>
<dd><p>Puts a message on the queue to be sent to the OPC server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> &#8211; The raw message you want to send. No processing is done on
this. It&#8217;s sent however it comes in.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.openpixel.OpenPixelClient.set_pixel_color">
<tt class="descname">set_pixel_color</tt><big>(</big><em>channel</em>, <em>pixel</em>, <em>color</em><big>)</big></dt>
<dd><p>Sets an invidual pixel color.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>channel</strong> &#8211; Int of the OPC channel for this pixel.</li>
<li><strong>pixel</strong> &#8211; Int of the number for this pixel on that channel.</li>
<li><strong>color</strong> &#8211; 3-item list or tuple of (red, green, blue) color values, each
an integer between 0-255.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.openpixel.OpenPixelClient.tick">
<tt class="descname">tick</tt><big>(</big><big>)</big></dt>
<dd><p>Called once per machine loop to update the pixels.</p>
</dd></dl>

<dl class="method">
<dt id="mpf.platform.openpixel.OpenPixelClient.update_pixels">
<tt class="descname">update_pixels</tt><big>(</big><em>pixels</em>, <em>channel=0</em><big>)</big></dt>
<dd><p>Send the list of pixel colors to the OPC server</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pixels</strong> &#8211; A list of 3-item iterables (tuples or lists). Each item is
a 0-255 value of the intensity of the red, green, and blue
values for the pixel. The first item in the list is the first
pixel on the channel, the second item is the second one, etc.</li>
<li><strong>channel</strong> &#8211; Which OPC channel the pixel data will be written to.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True on success. False if it was unable to connect to the OPC
server.</p>
</td>
</tr>
</tbody>
</table>
<p>Note that you must send color data for all the pixels in a channel (or
all the pixels up until the point you want. e.g. if you have 30 LEDs on
the channel and you just want to update LED #10, then you need to send
pixel data for the first 10 pixels.)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpf.platform.openpixel.OpenPixelLED">
<em class="property">class </em><tt class="descclassname">mpf.platform.openpixel.</tt><tt class="descname">OpenPixelLED</tt><big>(</big><em>opc_client</em>, <em>channel</em>, <em>led</em><big>)</big></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="mpf.platform.openpixel.OpenPixelLED.color">
<tt class="descname">color</tt><big>(</big><em>color</em><big>)</big></dt>
<dd></dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="mpf.platform.fast.html"
                        title="previous chapter">mpf.platform.fast module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mpf.platform.p3_roc.html"
                        title="next chapter">mpf.platform.p3_roc module</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/mpf.platform.openpixel.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mpf.platform.p3_roc.html" title="mpf.platform.p3_roc module"
             >next</a> |</li>
        <li class="right" >
          <a href="mpf.platform.fast.html" title="mpf.platform.fast module"
             >previous</a> |</li>
        <li><a href="mpf.html">Mission Pinball Framework 0.20.0-a0 documentation</a> &raquo;</li>
          <li><a href="mpf.platform.html" >mpf.platform package</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Brian Madden, Gabe Knuth.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>